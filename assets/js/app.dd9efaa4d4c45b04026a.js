!function(e){function t(t){for(var r,o,i=t[0],c=t[1],u=t[2],l=0,m=[];l<i.length;l++)o=i[l],Object.prototype.hasOwnProperty.call(n,o)&&n[o]&&m.push(n[o][0]),n[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(e[r]=c[r]);for(d&&d(t);m.length;)m.shift()();return s.push.apply(s,u||[]),a()}function a(){for(var e,t=0;t<s.length;t++){for(var a=s[t],r=!0,i=1;i<a.length;i++){var c=a[i];0!==n[c]&&(r=!1)}r&&(s.splice(t--,1),e=o(o.s=a[0]))}return e}var r={},n={0:0},s=[];function o(t){if(r[t])return r[t].exports;var a=r[t]={i:t,l:!1,exports:{}};return e[t].call(a.exports,a,a.exports,o),a.l=!0,a.exports}o.m=e,o.c=r,o.d=function(e,t,a){o.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:a})},o.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},o.t=function(e,t){if(1&t&&(e=o(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var a=Object.create(null);if(o.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)o.d(a,r,function(t){return e[t]}.bind(null,r));return a},o.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return o.d(t,"a",t),t},o.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},o.p="";var i=window.webpackJsonp=window.webpackJsonp||[],c=i.push.bind(i);i.push=t,i=i.slice();for(var u=0;u<i.length;u++)t(i[u]);var d=c;s.push([139,1]),a()}({131:function(e,t,a){var r={"./af":1,"./af.js":1,"./ar":2,"./ar-dz":3,"./ar-dz.js":3,"./ar-kw":4,"./ar-kw.js":4,"./ar-ly":5,"./ar-ly.js":5,"./ar-ma":6,"./ar-ma.js":6,"./ar-sa":7,"./ar-sa.js":7,"./ar-tn":8,"./ar-tn.js":8,"./ar.js":2,"./az":9,"./az.js":9,"./be":10,"./be.js":10,"./bg":11,"./bg.js":11,"./bm":12,"./bm.js":12,"./bn":13,"./bn.js":13,"./bo":14,"./bo.js":14,"./br":15,"./br.js":15,"./bs":16,"./bs.js":16,"./ca":17,"./ca.js":17,"./cs":18,"./cs.js":18,"./cv":19,"./cv.js":19,"./cy":20,"./cy.js":20,"./da":21,"./da.js":21,"./de":22,"./de-at":23,"./de-at.js":23,"./de-ch":24,"./de-ch.js":24,"./de.js":22,"./dv":25,"./dv.js":25,"./el":26,"./el.js":26,"./en-SG":27,"./en-SG.js":27,"./en-au":28,"./en-au.js":28,"./en-ca":29,"./en-ca.js":29,"./en-gb":30,"./en-gb.js":30,"./en-ie":31,"./en-ie.js":31,"./en-il":32,"./en-il.js":32,"./en-nz":33,"./en-nz.js":33,"./eo":34,"./eo.js":34,"./es":35,"./es-do":36,"./es-do.js":36,"./es-us":37,"./es-us.js":37,"./es.js":35,"./et":38,"./et.js":38,"./eu":39,"./eu.js":39,"./fa":40,"./fa.js":40,"./fi":41,"./fi.js":41,"./fo":42,"./fo.js":42,"./fr":43,"./fr-ca":44,"./fr-ca.js":44,"./fr-ch":45,"./fr-ch.js":45,"./fr.js":43,"./fy":46,"./fy.js":46,"./ga":47,"./ga.js":47,"./gd":48,"./gd.js":48,"./gl":49,"./gl.js":49,"./gom-latn":50,"./gom-latn.js":50,"./gu":51,"./gu.js":51,"./he":52,"./he.js":52,"./hi":53,"./hi.js":53,"./hr":54,"./hr.js":54,"./hu":55,"./hu.js":55,"./hy-am":56,"./hy-am.js":56,"./id":57,"./id.js":57,"./is":58,"./is.js":58,"./it":59,"./it-ch":60,"./it-ch.js":60,"./it.js":59,"./ja":61,"./ja.js":61,"./jv":62,"./jv.js":62,"./ka":63,"./ka.js":63,"./kk":64,"./kk.js":64,"./km":65,"./km.js":65,"./kn":66,"./kn.js":66,"./ko":67,"./ko.js":67,"./ku":68,"./ku.js":68,"./ky":69,"./ky.js":69,"./lb":70,"./lb.js":70,"./lo":71,"./lo.js":71,"./lt":72,"./lt.js":72,"./lv":73,"./lv.js":73,"./me":74,"./me.js":74,"./mi":75,"./mi.js":75,"./mk":76,"./mk.js":76,"./ml":77,"./ml.js":77,"./mn":78,"./mn.js":78,"./mr":79,"./mr.js":79,"./ms":80,"./ms-my":81,"./ms-my.js":81,"./ms.js":80,"./mt":82,"./mt.js":82,"./my":83,"./my.js":83,"./nb":84,"./nb.js":84,"./ne":85,"./ne.js":85,"./nl":86,"./nl-be":87,"./nl-be.js":87,"./nl.js":86,"./nn":88,"./nn.js":88,"./pa-in":89,"./pa-in.js":89,"./pl":90,"./pl.js":90,"./pt":91,"./pt-br":92,"./pt-br.js":92,"./pt.js":91,"./ro":93,"./ro.js":93,"./ru":94,"./ru.js":94,"./sd":95,"./sd.js":95,"./se":96,"./se.js":96,"./si":97,"./si.js":97,"./sk":98,"./sk.js":98,"./sl":99,"./sl.js":99,"./sq":100,"./sq.js":100,"./sr":101,"./sr-cyrl":102,"./sr-cyrl.js":102,"./sr.js":101,"./ss":103,"./ss.js":103,"./sv":104,"./sv.js":104,"./sw":105,"./sw.js":105,"./ta":106,"./ta.js":106,"./te":107,"./te.js":107,"./tet":108,"./tet.js":108,"./tg":109,"./tg.js":109,"./th":110,"./th.js":110,"./tl-ph":111,"./tl-ph.js":111,"./tlh":112,"./tlh.js":112,"./tr":113,"./tr.js":113,"./tzl":114,"./tzl.js":114,"./tzm":115,"./tzm-latn":116,"./tzm-latn.js":116,"./tzm.js":115,"./ug-cn":117,"./ug-cn.js":117,"./uk":118,"./uk.js":118,"./ur":119,"./ur.js":119,"./uz":120,"./uz-latn":121,"./uz-latn.js":121,"./uz.js":120,"./vi":122,"./vi.js":122,"./x-pseudo":123,"./x-pseudo.js":123,"./yo":124,"./yo.js":124,"./zh-cn":125,"./zh-cn.js":125,"./zh-hk":126,"./zh-hk.js":126,"./zh-tw":127,"./zh-tw.js":127};function n(e){var t=s(e);return a(t)}function s(e){if(!a.o(r,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return r[e]}n.keys=function(){return Object.keys(r)},n.resolve=s,e.exports=n,n.id=131},137:function(e,t,a){var r=a(138);"string"==typeof r&&(r=[[e.i,r,""]]);var n={hmr:!0,transform:void 0,insertInto:void 0};a(128)(r,n);r.locals&&(e.exports=r.locals)},138:function(e,t,a){},139:function(e,t,a){"use strict";a.r(t);var r={location:{city:e=>{document.querySelector(".location__city").innerHTML=e},country:e=>{document.querySelector(".location__country").innerHTML=e},loc:e=>{document.querySelector(".map__locate").innerHTML=e}},time:e=>{document.querySelector(".main__data-and-time").innerHTML=e},currentWeather:{currentTemp:e=>{document.querySelector(".weather__temp").innerHTML=e},currentH:e=>{document.querySelector(".humid").innerHTML=e},currentFeel:e=>{document.querySelector(".tempr").innerHTML=e},currentWind:e=>{document.querySelector(".wind").innerHTML=e},icon:e=>{document.querySelector("#main_weather-icon").innerHTML=e}},daysWeather:{Temp:{firstDay:e=>{document.querySelector(".info__weather-days__1__temp").innerHTML=e},secondDay:e=>{document.querySelector(".info__weather-days__2__temp").innerHTML=e},thirdDay:e=>{document.querySelector(".info__weather-days__3__temp").innerHTML=e}},Name:{firstDay:e=>{document.querySelector(".info__weather-days__1__day").innerHTML=e},secondDay:e=>{document.querySelector(".info__weather-days__2__day").innerHTML=e},thirdDay:e=>{document.querySelector(".info__weather-days__3__day").innerHTML=e}},Icon:{firstDay:e=>{document.querySelector(".info__weather-days__1__icon").innerHTML=e},secondDay:e=>{document.querySelector(".info__weather-days__2__icon").innerHTML=e},thirdDay:e=>{document.querySelector(".info__weather-days__3__icon").innerHTML=e}}},buttons:{voice:()=>document.querySelector(".voice-search-form__button"),langSwitcher:()=>document.querySelector(".lang-container__select-lang"),fahrButton:()=>document.querySelector(".tool_fahrenheit-button"),celButton:()=>document.querySelector(".tool_celsius-button"),searchButton:()=>document.querySelector(".search-form__button"),imageButton:()=>document.querySelector(".tool_refresh-button")}};class n{constructor(){this.URL="https://ipinfo.io/json?token=901bb24d6f450b"}async getLocate(){return(await fetch(this.URL)).json()}}class s{static async getImage(e,t,a){this.URL=`https://api.unsplash.com/photos/random?query=${e} ${t} ${a}&client_id=26f29ed5d419ba78a6603f0ff16060d8765c2010fb98734ede1089f6c7707037`,fetch(this.URL).then(e=>e.json()).catch(()=>{alert("Количество запросов исчерпано")}).then(e=>{e.urls&&document.body.setAttribute("Style",`background: linear-gradient( rgba(0, 0, 0, 0.7), rgba(0, 0, 0, 0.7) ), url(${e.urls.small}) no-repeat`)})}}var o={dataForImage:{Time:"",Season:"",Weather:"",City:"Minsk"},weatherIcon:{Clear:"wb_sunny",Clouds:"wb_cloudy",Flash:"flash_on",Rain:"beach_access",Snow:"ac_unit"},timeZone:10800};const i=a(0);class c{static async update(e,t){i.locale("en");const a=i();a.locale(e),a.utcOffset(t/3600);const r=i().format("L").split("/")[0],n=i().hour(),s=["night","night","morning","afternoon","evening"];o.dataForImage.Time=s[Math.floor(n/4)];const c=["winter","winter","spring","spring","spring","summer","summer","summer","autumn","autumn","autumn","winter"];return o.dataForImage.Season=c[r-1],[a.format("dd D MMMM , hh:mm a").toUpperCase(),a.add(1,"d").format("dddd"),a.add(1,"d").format("dddd"),a.add(1,"d").format("dddd"),s[Math.floor(n/4)],c[r-1]]}}var u=a(129);class d{static draw(e,t,a){u.a.load().then(r=>{this.map=new r.Map(e,{center:[t,a],zoom:12,controls:[]})}).catch(()=>alert("Failed to load Yandex Maps"))}}class l{static async getWeather(e,t){this.URL=`https://api.openweathermap.org/data/2.5/forecast?q=${e}&lang=${t}&units=metric&APPID=b6742f5fccd600f71f4804c0d14b1090`;const a=await fetch(this.URL),r=await a.json();return{image:r.list[0].weather[0].main,currentTemp:r.list[0].main.temp,currentFeel:r.list[0].main.feels_like,currentWind:r.list[0].wind.speed,currentH:r.list[0].main.humidity,days:{temp:{first:r.list[7].main.temp,second:r.list[14].main.temp,third:r.list[21].main.temp},image:{first:r.list[7].weather[0].main,second:r.list[14].weather[0].main,third:r.list[21].weather[0].main}},loc:[r.city.coord.lat,r.city.coord.lon],timezone:r.city.timezone,city:r.city.name}}}class m{static async getLocate(e,t,a="en"){this.URL=`https://api.opencagedata.com/geocode/v1/json?q=${e}+${t}&language=${a}&key=a5e5f8d2b3b148e28b179c329dc8c7c0`;const r=await fetch(this.URL),n=await r.json();return{city:n.results[0].components.city||"",country:n.results[0].components.country}}}class h{constructor(e,t){this.button=e,this.field=t}init(){const e=new(window.SpeechRecognition||window.webkitSpeechRecognition);e.addEventListener("result",e=>{const t=Array.from(e.results).map(e=>e[0]).map(e=>e.transcript).join("");this.field.value=t}),e.addEventListener("end",()=>{this.button.removeAttribute("style")}),this.button.addEventListener("click",()=>{this.button.setAttribute("style","background: red"),e.start()})}}(new class{constructor(){this.location=new n,this.interval=null,this.Storage=window.localStorage}async init(){const e=await this.location.getLocate(),{loc:t,city:a}=e,n=t.split(","),i=r.buttons.langSwitcher(),u=r.buttons.fahrButton(),l=r.buttons.celButton(),m=r.buttons.searchButton(),y=r.buttons.imageButton();r.location.loc(n),r.location.city(a),this.Storage.getItem("Lang")||this.Storage.setItem("Lang","en"),i.value=this.Storage.getItem("Lang").toUpperCase(),i.addEventListener("change",()=>{const e=this.Storage.getItem("Temp");switch(i.value){case"RU":this.Storage.setItem("Lang","ru"),this.updateWeather(o.dataForImage.City,"ru",e),this.updateTime("ru",o.timeZone);break;case"BE":this.Storage.setItem("Lang","be"),this.updateWeather(o.dataForImage.City,"be",e),this.updateTime("be",o.timeZone);break;case"DE":this.Storage.setItem("Lang","de"),this.updateWeather(o.dataForImage.City,"de",e),this.updateTime("de",o.timeZone);break;case"IT":this.Storage.setItem("Lang","it"),this.updateWeather(o.dataForImage.City,"it",e),this.updateTime("it",o.timeZone);break;default:this.Storage.setItem("Lang","en"),this.updateWeather(o.dataForImage.City,"en",e),this.updateTime("en",o.timeZone)}}),this.Storage.getItem("Temp")?"C"===this.Storage.getItem("Temp")?l.setAttribute("style","color: grey"):u.setAttribute("style","color: grey"):this.Storage.setItem("Temp","C"),u.addEventListener("click",()=>{this.Storage.setItem("Temp","F"),l.setAttribute("style","color: white"),u.setAttribute("style","color: grey"),this.updateWeather(o.dataForImage.City,this.Storage.getItem("Lang"),"F")}),l.addEventListener("click",()=>{this.Storage.setItem("Temp","C"),u.setAttribute("style","color: white"),l.setAttribute("style","color: grey"),this.updateWeather(o.dataForImage.City,this.Storage.getItem("Lang"),"C")});const g=()=>{const{value:e}=document.querySelector(".search-form__input");e&&this.updateWeather(e,this.Storage.getItem("Lang"),this.Storage.getItem("Temp"))};m.addEventListener("click",g),window.addEventListener("keydown",e=>{13===e.keyCode&&g()}),d.draw(document.querySelector("#map"),n[0],n[1]),this.updateWeather(a,this.Storage.getItem("Lang"),this.Storage.getItem("Temp"));const j=await c.update();s.getImage(o.dataForImage.Weather,j[5],j[4],o.dataForImage.City),y.addEventListener("click",async()=>{s.getImage(o.dataForImage.Weather,o.dataForImage.Season,o.dataForImage.Time,o.dataForImage.City)}),this.VoiceSearch=new h(r.buttons.voice(),document.querySelector(".search-form__input")),this.VoiceSearch.init()}updateTime(e=this.Storage.getItem("Lang"),t=10800){clearInterval(this.interval);const a=async()=>{const a=await c.update(e,t);r.daysWeather.Name.firstDay(a[1]),r.daysWeather.Name.secondDay(a[2]),r.daysWeather.Name.thirdDay(a[3]),r.time(a[0])};a(),this.interval=setInterval(a,6e3)}async updateWeather(e="Minsk",t=this.Storage.getItem("Lang"),a=this.Storage.getItem("Temp")){try{const n=await l.getWeather(e,t);r.currentWeather.currentTemp(` \n      ${"C"===a?Math.floor(n.currentTemp):Math.floor(1.8*n.currentTemp+32)}°`),r.currentWeather.currentFeel(`<i class="material-icons">pan_tool</i>\n    ${"C"===a?Math.floor(n.currentTemp):Math.floor(1.8*n.currentTemp+32)}°`),r.currentWeather.currentH(`<i class="material-icons">opacity</i> ${n.currentH}%`),r.currentWeather.currentWind(`<i class="material-icons">toys</i>${n.currentWind}m/s`),r.currentWeather.icon(o.weatherIcon[n.image]),o.dataForImage.Weather=n.image,r.daysWeather.Temp.firstDay(` \n    ${"C"===a?Math.floor(n.days.temp.first):Math.floor(1.8*n.days.temp.first+32)}°`),r.daysWeather.Icon.firstDay(o.weatherIcon[n.days.image.first]),r.daysWeather.Temp.secondDay(` \n    ${"C"===a?Math.floor(n.days.temp.second):Math.floor(1.8*n.days.temp.second+32)}°`),r.daysWeather.Icon.secondDay(o.weatherIcon[n.days.image.second]),r.daysWeather.Temp.thirdDay(` \n    ${"C"===a?Math.floor(n.days.temp.third):Math.floor(1.8*n.days.temp.third+32)}°`),r.daysWeather.Icon.thirdDay(o.weatherIcon[n.days.image.third]);const s=await m.getLocate(n.loc[0],n.loc[1],t);r.location.city(s.city),r.location.country(s.country),document.querySelector("#map").innerHTML="",d.draw(document.querySelector("#map"),n.loc[0],n.loc[1]),r.location.loc(`${n.loc[0]} ${n.loc[1]}`),this.updateTime(t,n.timezone),o.timeZone=n.timezone,o.dataForImage.City=n.city}catch(e){alert("Такого города нет в базе")}}}).init();a(0),a(132),a(135),a(137)}});